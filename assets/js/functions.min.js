!function(){"use strict";function e(e){if(window.location.pathname.length>1){var t=window.location.pathname.slice(-1,1);x.fetchPost(t),setTimeout(function(){o.classList.remove("is-visible")},200)}else o.classList.remove("is-visible")}function t(e){var t=h.querySelectorAll(".gallery-item"),o=h.querySelector(".is-active").tabIndex,n=Number(o),i=t.length-1;console.log(o,t.length),"left"===e&&(n<1?n=i:n--),"right"===e&&(n===i?n=0:n++),t.forEach(function(e){e.tabIndex!==n?e.className="gallery-item":e.className="gallery-item is-active"})}var o=document.querySelector(".splash-screen"),n=document.querySelector(".nav-contact"),i=document.querySelector(".contact-section"),c=document.querySelector(".x-icon"),l=document.querySelector(".home-link"),r=document.querySelectorAll(".box-link"),s=document.querySelectorAll(".arrow"),a=document.querySelector("input#name"),d=document.querySelector(".contact"),u=document.querySelector(".active-post-body"),m=document.querySelector(".active-post-header"),p=document.querySelectorAll(".contact-section input"),h=document.getElementById("base-gallery"),f=document.getElementById("topMenu"),v="div > figure, div > img, div > .custom-selector, div > video, div > iframe",y=document.querySelector(".arrow-left"),g=document.querySelector(".arrow-right"),b=document.getElementById("projects-dropdown"),w=document.querySelectorAll(".thumbnail-buttons .gallery-button"),L,E,S,q,C,k=function(e,t,o){var n=document.querySelectorAll(""+e);if("add"===o)for(var i=0;i<n.length;i++)n[i].classList.add(""+t);if("remove"===o||!1===o)for(var i=0;i<n.length;i++)n[i].classList.remove(""+t)},H=function(e){!0!==document.body.classList.contains(""+e)&&document.body.classList.add(""+e)};window.onload=e,window.onpopstate=e;var A={isPost:function(){window.scrollTo(0,0),H("post-template")},isHome:function(){window.scrollTo(0,0),document.body.className="home-template"},isCarousel:function(){H("carousel-template")},isContact:function(){H("contact-template")}},T=function(e,t,o,n){this.HTMLdata=e,this.title=t,this.metaDesc=o,this.slug=n},N=function(e,t,o){T.call(this,e,t,o)};N.prototype=Object.create(T.prototype),N.prototype.constructor=N,N.prototype.display=function(){var e=document.createElement("div"),t=document.createElement("h1"),o=document.createElement("h5");for(e.innerHTML=this.HTMLdata,t.innerHTML=this.title,o.innerHTML=this.metaDesc;u.firstChild;)u.removeChild(u.firstChild);for(;m.firstChild;)m.removeChild(m.firstChild);u.appendChild(e),m.appendChild(t),m.appendChild(o)};var M=function(e){N.call(this,e)};M.prototype=Object.create(N.prototype),M.prototype.constructor=M,M.prototype.display=function(e){var t=document.querySelector(e),o=document.querySelectorAll(".gallery-item");"base-gallery is-visible"!==h.className&&(k(e,"is-active","add"),o.forEach(function(e){e.className=e!==t?"gallery-item":"gallery-item is-active"}),k(".arrow","is-visible","add"),h.className="base-gallery is-visible")},M.prototype.build=function(){var e=this,t=document.createElement("div");t.innerHTML=this.HTMLdata;for(var o=t.querySelectorAll(v),n=u.querySelectorAll(v),i=o.length,c=[],l,r;h.firstChild;)h.removeChild(h.firstChild);Array.prototype.forEach.call(o,function(t,o){var l=document.createElement("div");for(l.className="gallery-item",l.appendChild(t),l.setAttribute("tabindex",""+o++),c.push(l.outerHTML);o===i;){var r=c.join("");h.innerHTML=r,h.addEventListener("click",e.cloak),y.addEventListener("click",D.left),g.addEventListener("click",D.right),n.forEach(function(t,o){t.setAttribute("tabindex",""+o++),t.addEventListener("click",function(){var o=t.getAttribute("tabindex");e.display('.gallery-item[tabindex="'+o+'"]')})}),o++}})},M.prototype.cloak=function(){s.forEach(function(e){e.classList.remove("is-visible")}),h.className="base-gallery"};var D={left:function(){t("left")},right:function(){t("right")}},x={showDropdown:function(){b.className="projects-dropdown is-active",document.body.addEventListener("click",x.hideDropdown)},hideDropdown:function(){b.className="projects-dropdown",document.body.removeEventListener("click",x.hideDropdown)},showContact:function(e){function t(){var e=$(this).next("label"),t=$(this).prev("label");e.addClass("hasEntry")}e.preventDefault(),A.isContact();var o=document.querySelectorAll("input"),n=document.querySelector(".contact-section")},closeContact:function(){A.isHome()},goBack:function(e){e.preventDefault(),history.replaceState(null,null,"/"),A.isHome()},fetchPost:function(e){var t=new XMLHttpRequest;A.isPost(),o.classList.add("is-visible"),t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE)if(setTimeout(function(){o.classList.remove("is-visible")},80),200==t.status){var n=JSON.parse(t.responseText);console.log(n.posts[0]),S=new N(n.posts[0].html,n.posts[0].title,n.posts[0].meta_description),C=new M(n.posts[0].html),history.pushState(null,null,"/"+e+"/"),S.display(),C.build()}else 400==t.status?A.isHome():console.log("something else other than 200 was returned")},t.open("GET",ghost.url.api("posts/slug/"+e)),t.send()}};window.onpopstate=function(){window.location.pathname.length>1?A.isPost():(A.isHome(),history.replaceState(null,null,"/"))},r.forEach(function(e,t,o){e.setAttribute("data-project",t),e.addEventListener("click",function(t){var o=e.pathname.slice(1,-1);t.preventDefault(),x.fetchPost(o)})}),f.addEventListener("mouseover",x.showDropdown),n.addEventListener("click",x.showContact),c.addEventListener("click",x.closeContact),l.addEventListener("click",x.goBack),w.forEach(function(e,t,o){e.addEventListener("click",function(e){document.querySelector(".gallery-item").className="gallery-item is-active"})})}();