"use strict";$(function(){function e(e){$(".gallery-item[tabindex="+e+"]").addClass("is-active").siblings(".gallery-item").removeClass("is-active")}function t(e){var t=0;if(window.location.pathname.length>1){var i=window.location.pathname.slice(1,-1);history.replaceState(s(i),null,"/"+i+"/")}1===window.location.pathname.length&&(window.location.pathname="/",b("isHome"))}function i(e){var t=$(this).attr("href").slice(1,-1);e.preventDefault(),s(t)}function s(e){var t=new m;$.get(ghost.url.api("posts/slug/"+e)).done(function(i){t.build([i.posts[0].title,i.posts[0].meta_description,i.posts[0].html]),b("isPost"),1===window.location.pathname.length&&history.pushState(null,null,"/"),history.pushState(null,null,"/"+e),p.on("click",function(){b("isHome"),history.replaceState(null,null,"/")})})}function a(e){e.preventDefault();var t=$.trim($(this).text().toLowerCase());$("#"+t+"-dropdown").addClass("is-active").removeClass("is-next").siblings("ul").addClass("is-next").removeClass("is-active"),$("*").on("click",function(){$(".dropdown").parents("ul").removeClass("is-active is-next")})}function o(e){function t(){var e=$(this).next("label"),t=$(this).prev("label");e.addClass("hasEntry")}function i(){b("closeContact")}e.preventDefault(),b("isContact"),$("input").on("focusin",t),$(".contact-section").on("click",i)}var n=document.getElementById("base-gallery"),l=document.getElementsByClassName("arrow"),c=$(".active-post-header h1, .active-post-header h5, .active-post-body"),r=$("figure, figure img, video, img"),d=$(".project-thumbs-background, .project-thumbs-container, .home-header"),u,v=$(".box-link"),p=$(".x-icon"),m=function e(t){this.slug=t};m.prototype=Object.create(m.prototype),m.prototype.constructor=m;var b=function e(t){switch(window.scrollTo(0,0),t){case"isPost":$("body").addClass("post-template"),$(".index-container, body, nav, .top-bar").addClass("is-white"),$(".active-post").addClass("is-visible"),$(".box-container").removeClass("is-visible");break;case"isHome":$("body").removeClass("post-template"),$(".index-container, body, nav, .top-bar").removeClass("is-white"),$(".active-post").removeClass("is-visible"),$(".box-container").addClass("is-visible");break;case"isContact":$(".contact-section").addClass("is-active"),$(".nav-contact").addClass("is-active").siblings(".nav-projects").removeClass("is-active"),setTimeout(function(){$("input#email").focus()},50);break;case"closeContact":$(".contact-section").removeClass("is-active"),$(".nav-projects").addClass("is-active").siblings().removeClass("is-active");break;default:return}"closeContact"!==t&&"isHome"!==t||p.removeClass("post-visible contact-visible").hide(),"isPost"!==t&&"isContact"!==t||p.addClass("post-visible contact-visible").show()},h={build:function e(){$(n).empty();for(var t=Array.from(document.getElementsByTagName("figure")),i=[],s=0;s<t.length;s++){var a=document.createElement("gallery-item"),o=a.append(t[s].innerHTML);t[s].setAttribute("tabindex",s),i.push("<div class='gallery-item' tabindex='"+s+"'>"+t[s].innerHTML+"</div>")}return $(n).append(i.join("")),u=i.length},display:function e(){var t=$(this).attr("tabindex"),i=$(".gallery-item[tabindex="+t+"]");"base-gallery is-visible"!==n.className&&(i.addClass("is-active").siblings(".gallery-item").removeClass("is-active"),$(l).addClass("is-visible"),n.className="base-gallery is-visible")},cloak:function e(){$(l).removeClass("is-visible"),n.className="base-gallery"},shift:function t(){var i=$(this).attr("data-navigate"),s=$(".gallery-item.is-active").attr("tabindex"),a=Number(u-1);if("left"===i){if(0==s)return e(a);s--}if("right"===i){if(s==a)return e(0);s++}return e(s)}},f;m.prototype.build=function(e){for(var t=0;t<=e.length;t++){for(;t===e.length;){if(h.build(),$("figure").on("click",h.display),$(l).on("click",h.shift),$(n).on("click",h.cloak),t===e.length)return console.log(f),f=$(".active-post-body").html();t++}$(c[t]).html(e[t])}},window.onload=t,v.on("click",i),$('ul#topMenu li[role="presentation"], ul#topMenu li[role="presentation"] a').on("mouseover",a),$(".nav-contact").on("click",o)});